/*
var uri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAGCAYAAADkOT91AAAAEUlEQVQIW2P8DwQMSICRFgIAVL4X78StJxIAAAAASUVORK5CYII=";
*/
var uri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAYAAABirU3bAAAAM0lEQVQIW2M0q1r+//9/BiAAEwyMZlXLgAIQDljAtGoJggcTgKlgZGRkYDSpAKpgRCgCAC8QFZ6zMZV3AAAAAElFTkSuQmCC";
var marker = "base64,";
var index = uri.indexOf(marker) + marker.length;
var base64 = uri.substring(index);
var map = {
    "A": [0,0,0,0,0,0],
    "B": [0,0,0,0,0,1],
    "C": [0,0,0,0,1,0],
    "D": [0,0,0,0,1,1],
    "E": [0,0,0,1,0,0],
    "F": [0,0,0,1,0,1],
    "G": [0,0,0,1,1,0],
    "H": [0,0,0,1,1,1],
    "I": [0,0,1,0,0,0],
    "J": [0,0,1,0,0,1],
    "K": [0,0,1,0,1,0],
    "L": [0,0,1,0,1,1],
    "M": [0,0,1,1,0,0],
    "N": [0,0,1,1,0,1],
    "O": [0,0,1,1,1,0],
    "P": [0,0,1,1,1,1],
    "Q": [0,1,0,0,0,0],
    "R": [0,1,0,0,0,1],
    "S": [0,1,0,0,1,0],
    "T": [0,1,0,0,1,1],
    "U": [0,1,0,1,0,0],
    "V": [0,1,0,1,0,1],
    "W": [0,1,0,1,1,0],
    "X": [0,1,0,1,1,1],
    "Y": [0,1,1,0,0,0],
    "Z": [0,1,1,0,0,1],
    "a": [0,1,1,0,1,0],
    "b": [0,1,1,0,1,1],
    "c": [0,1,1,1,0,0],
    "d": [0,1,1,1,0,1],
    "e": [0,1,1,1,1,0],
    "f": [0,1,1,1,1,1],
    "g": [1,0,0,0,0,0],
    "h": [1,0,0,0,0,1],
    "i": [1,0,0,0,1,0],
    "j": [1,0,0,0,1,1],
    "k": [1,0,0,1,0,0],
    "l": [1,0,0,1,0,1],
    "m": [1,0,0,1,1,0],
    "n": [1,0,0,1,1,1],
    "o": [1,0,1,0,0,0],
    "p": [1,0,1,0,0,1],
    "q": [1,0,1,0,1,0],
    "r": [1,0,1,0,1,1],
    "s": [1,0,1,1,0,0],
    "t": [1,0,1,1,0,1],
    "u": [1,0,1,1,1,0],
    "v": [1,0,1,1,1,1],
    "w": [1,1,0,0,0,0],
    "x": [1,1,0,0,0,1],
    "y": [1,1,0,0,1,0],
    "z": [1,1,0,0,1,1],
    "0": [1,1,0,1,0,0],
    "1": [1,1,0,1,0,1],
    "2": [1,1,0,1,1,0],
    "3": [1,1,0,1,1,1],
    "4": [1,1,1,0,0,0],
    "5": [1,1,1,0,0,1],
    "6": [1,1,1,0,1,0],
    "7": [1,1,1,0,1,1],
    "8": [1,1,1,1,0,0],
    "9": [1,1,1,1,0,1],
    "+": [1,1,1,1,1,0],
    "/": [1,1,1,1,1,1],
    "=": []
};
var mapReverse = {
    "110100":"0",
    "110101":"1",
    "110110":"2",
    "110111":"3",
    "111000":"4",
    "111001":"5",
    "111010":"6",
    "111011":"7",
    "111100":"8",
    "111101":"9",
    "000000":"A",
    "000001":"B",
    "000010":"C",
    "000011":"D",
    "000100":"E",
    "000101":"F",
    "000110":"G",
    "000111":"H",
    "001000":"I",
    "001001":"J",
    "001010":"K",
    "001011":"L",
    "001100":"M",
    "001101":"N",
    "001110":"O",
    "001111":"P",
    "010000":"Q",
    "010001":"R",
    "010010":"S",
    "010011":"T",
    "010100":"U",
    "010101":"V",
    "010110":"W",
    "010111":"X",
    "011000":"Y",
    "011001":"Z",
    "011010":"a",
    "011011":"b",
    "011100":"c",
    "011101":"d",
    "011110":"e",
    "011111":"f",
    "100000":"g",
    "100001":"h",
    "100010":"i",
    "100011":"j",
    "100100":"k",
    "100101":"l",
    "100110":"m",
    "100111":"n",
    "101000":"o",
    "101001":"p",
    "101010":"q",
    "101011":"r",
    "101100":"s",
    "101101":"t",
    "101110":"u",
    "101111":"v",
    "110000":"w",
    "110001":"x",
    "110010":"y",
    "110011":"z",
    "111110":"+",
    "111111":"/",
    "":"="
};

var pool = [];
for (var i = 0; i < base64.length; i++) {
    pool = pool.concat(map[base64.charAt(i)]);
}
var uint8arr = new Uint8Array(pool);

// cut
uint8arr = uint8arr.subarray(0, uint8arr.length - 400);

// convert Uint8Array to base64
var base64pool = [];
var setCount = Math.floor(uint8arr.length / 6);
for (var r = 0; r < setCount; r++) {
    var i = r * 6;
    var sets = Array.prototype.slice.call(uint8arr.subarray(i, i+6), 0).join("");
    base64pool.push(mapReverse[sets]);
}
var recoverdBase64String = base64pool.join("");

// console.log(recoverdBase64String);
console.log(uint8arr.subarray(0, 8));
